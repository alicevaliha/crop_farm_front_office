{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from'axios';import'../Css/Mes_Messages.css';import Header from'../Components/Header';import Data_Message from'../Data/Data_Message';import Data_Amis from'../Data/Data_Amis';import'../Css/Section_Gauche_Message.css';import'../Css/Section_Droite_Message.css';import Box_Message_Preview from'../Components/Box_Message_Preview';import Head_Link from'../Components/Head_Link';import Section_Recherche from'../Components/Section_Recherche';import icon_boutton from'../Components/img_component/chercher_white.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Mes_Messages(){const[data_amis,setData_Amis]=useState(Data_Amis);const[data_message,setData_Message]=useState(Data_Message);const[recherche,setRecherche]=useState('');// Fonction de filtrage pour les amis en fonction du texte de recherche\nconst filterFriends=searchText=>{setRecherche(searchText);// Met à jour le texte de recherche\n};useEffect(()=>{let storedId=localStorage.getItem(\"userId\");let request=\"https://cropfarmback-production.up.railway.app/proprietaires/amis/\";request+=storedId;console.log(request);axios.get(request).then(response=>{setData_Amis(response.data);// Mettez à jour l'état avec les données récupérées depuis l'API\n// setMyparcelles(response.data);\n}).catch(error=>{console.log('Erreur lors de la récupération des terrains non valides :',error);});},[]);// const filteredFriends = data_amis.filter((ami) =>\n//   ami.nom.toLowerCase().includes(recherche.toLowerCase()) \n// );\nconst All_Friends=data_amis.map(ami=>{//   const messagesAmi = data_message.filter(\n//     (message) =>\n//       message.senderMessage.idPersonne === ami.idPersonne ||\n//       message.receiverMessage.idPersonne === ami.idPersonne\n// );\n//   messagesAmi.sort((a, b) => new Date(b.dateMessage) - new Date(a.dateMessage));\n//   const dernierMessage = messagesAmi.length > 0 ? messagesAmi[0].texteMessage : '';\nreturn/*#__PURE__*/_jsx(Box_Message_Preview// key={ami.idPersonne}\n,{idPersonne:ami.id,nomPersonne:ami.nom// prenomPersonne={ami.prenomPersonne}\n,imagePersonne:\"Image_Terrain/profil.jpeg\"// texteMessage={dernierMessage} // Passer le dernier message comme prop\n});});return/*#__PURE__*/_jsx(\"body\",{children:/*#__PURE__*/_jsxs(\"div\",{id:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"section_recherche\",children:[/*#__PURE__*/_jsx(\"img\",{class:\"section_recherche_background\",src:\"./Image_Terrain/forest_2.gif\",alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"top\",children:/*#__PURE__*/_jsx(Head_Link,{titre:\"Plus d'information sur la plantation\",lien:\"https://www.plantezcheznous.com/conseils-potager/fruits-et-legumes-de-saison/\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom\",children:[/*#__PURE__*/_jsx(Section_Recherche,{titre_recherche:\"Recherche\",placeholder:\"Nom de votre ami...\",icon_boutton:icon_boutton,onRecherche:filterFriends}),/*#__PURE__*/_jsx(\"div\",{className:\"titre\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Discutez avec vos amis pour plus de productivit\\xE9\"})})]})]}),/*#__PURE__*/_jsx(\"section\",{className:\"section_liste\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mini_titre\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Liste des messsages\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"all_liste\",children:All_Friends})]})})]})]})});}export default Mes_Messages;","map":{"version":3,"names":["React","useEffect","useState","axios","Header","Data_Message","Data_Amis","Box_Message_Preview","Head_Link","Section_Recherche","icon_boutton","jsx","_jsx","jsxs","_jsxs","Mes_Messages","data_amis","setData_Amis","data_message","setData_Message","recherche","setRecherche","filterFriends","searchText","storedId","localStorage","getItem","request","console","log","get","then","response","data","catch","error","All_Friends","map","ami","idPersonne","id","nomPersonne","nom","imagePersonne","children","className","class","src","alt","titre","lien","titre_recherche","placeholder","onRecherche"],"sources":["/Users/macbook/Documents/git clones/crop_farm_front_office/src/Pages/Mes_Messages.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from 'axios';\r\nimport '../Css/Mes_Messages.css'\r\nimport Header from '../Components/Header'\r\nimport Data_Message from '../Data/Data_Message'\r\nimport Data_Amis from '../Data/Data_Amis'\r\nimport '../Css/Section_Gauche_Message.css'\r\nimport '../Css/Section_Droite_Message.css' \r\nimport Box_Message_Preview from '../Components/Box_Message_Preview'\r\nimport Head_Link from '../Components/Head_Link'\r\nimport Section_Recherche from '../Components/Section_Recherche'\r\nimport icon_boutton from '../Components/img_component/chercher_white.png'\r\n\r\n\r\nfunction Mes_Messages() {\r\n  const [data_amis,setData_Amis] = useState(Data_Amis)\r\n  const [data_message,setData_Message] = useState(Data_Message)\r\n  const [recherche, setRecherche] = useState('')\r\n  \r\n   // Fonction de filtrage pour les amis en fonction du texte de recherche\r\n   const filterFriends = (searchText) => {\r\n    setRecherche(searchText); // Met à jour le texte de recherche\r\n  };\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n\r\n    let storedId = localStorage.getItem(\"userId\");\r\n    let request = \"https://cropfarmback-production.up.railway.app/proprietaires/amis/\";\r\n    request+= storedId;\r\n    \r\n    console.log(request);\r\n\r\n    axios.get(request)\r\n    .then(response => {\r\n      setData_Amis(response.data);\r\n      // Mettez à jour l'état avec les données récupérées depuis l'API\r\n      // setMyparcelles(response.data);\r\n    })\r\n    .catch(error => {\r\n      console.log('Erreur lors de la récupération des terrains non valides :', error);\r\n    });\r\n    \r\n  }, []);\r\n\r\n  // const filteredFriends = data_amis.filter((ami) =>\r\n\r\n  //   ami.nom.toLowerCase().includes(recherche.toLowerCase()) \r\n\r\n  // );\r\n\r\n  const All_Friends = data_amis.map((ami) => {\r\n\r\n  //   const messagesAmi = data_message.filter(\r\n  //     (message) =>\r\n  //       message.senderMessage.idPersonne === ami.idPersonne ||\r\n  //       message.receiverMessage.idPersonne === ami.idPersonne\r\n  // );\r\n  \r\n\r\n\r\n  //   messagesAmi.sort((a, b) => new Date(b.dateMessage) - new Date(a.dateMessage));\r\n  \r\n  //   const dernierMessage = messagesAmi.length > 0 ? messagesAmi[0].texteMessage : '';\r\n  \r\n    return (\r\n      <Box_Message_Preview\r\n        // key={ami.idPersonne}\r\n        idPersonne={ami.id}\r\n        nomPersonne={ami.nom}\r\n        // prenomPersonne={ami.prenomPersonne}\r\n        imagePersonne=\"Image_Terrain/profil.jpeg\"\r\n        // texteMessage={dernierMessage} // Passer le dernier message comme prop\r\n      />\r\n    );\r\n\r\n  });\r\n  \r\n  return (\r\n    <body>\r\n    <div id=\"page\">\r\n        <Header/>\r\n        <main>\r\n            <section className=\"section_recherche\">\r\n            <img class=\"section_recherche_background\" src=\"./Image_Terrain/forest_2.gif\" alt=\"\"/>\r\n              <div className=\"top\">\r\n                <Head_Link titre = \"Plus d'information sur la plantation\" lien=\"https://www.plantezcheznous.com/conseils-potager/fruits-et-legumes-de-saison/\"/>\r\n              </div>\r\n              <div className=\"bottom\">\r\n                <Section_Recherche titre_recherche=\"Recherche\" placeholder=\"Nom de votre ami...\" icon_boutton={icon_boutton} onRecherche={filterFriends}/>\r\n                  <div className=\"titre\">\r\n                      <h1>Discutez avec vos amis pour plus\r\n                      de productivité</h1>\r\n                  </div>\r\n              </div>\r\n          </section>\r\n\r\n          <section className=\"section_liste\">\r\n              <div className='top'>\r\n                    <div className=\"mini_titre\">\r\n                        <h3>Liste des messsages</h3>\r\n                    </div>\r\n                    <div className=\"all_liste\">\r\n                          {All_Friends}\r\n                    </div>\r\n              </div>\r\n              \r\n          </section>\r\n\r\n\r\n        \r\n        </main>\r\n    </div>\r\n    </body>\r\n  )\r\n}\r\n\r\nexport default Mes_Messages"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}