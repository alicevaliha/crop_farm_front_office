{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import Header from'../Components/Header';import Head_Link from'../Components/Head_Link';import Section_Recherche from'../Components/Section_Recherche';import user_image from'../Components/img_component/user.png';import icon_search from'../Components/img_component/chercher_white.png';import icon_send from'../Components/img_component/send.png';import Data_Message from'../Data/Data_Message';import Data_MyData from'../Data/Data_MyData';import Box_Message_Receiver from'../Components/Box_Message_Receiver';import Box_Message_Sender from'../Components/Box_Message_Sender';import'../Css/Section_Droite_Ma_Discussion.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Ma_discussion(props){const[keyword,setKeyword]=useState(null);/// Recuperation des donnés du Box message preview ///\nconst searchParams=new URLSearchParams(window.location.search);const idAmi=searchParams.get('idPersonne');const nomAmi=searchParams.get('nomPersonne');const prenomAmi=searchParams.get('prenomPersonne');const imageAmi=searchParams.get('imageAmi');const[data_message,setData_Message]=useState(Data_Message);//// Mes donnés d'utilisateurs\nconst senderData=Data_MyData[0];// Fonction pour filtrer les messages des amis \nconst getFilteredAndSortedMessages=personneId=>{const filteredMessages=data_message.filter(message=>message.senderMessage.idPersonne===personneId||message.receiverMessage.idPersonne===personneId);const sortedMessages=filteredMessages.sort((a,b)=>new Date(b.dateMessage)-new Date(a.dateMessage));return sortedMessages;};// Fonction pour envoier des messages\nconst sendMessage=textMessage=>{const newMessage={idMessage:\"00\".concat(data_message.length+1,\"B\"),dateMessage:new Date().toISOString(),senderMessage:senderData,receiverMessage:{idPersonne:idAmi,nomPersonne:nomAmi,prenomPersonne:prenomAmi,imagePersonne:imageAmi},texteMessage:textMessage};////////////////////////////////////\n// Ajouter dans le tableau message\nsetData_Message([...data_message,newMessage]);};const handleSubmitMessage=textMessage=>{if(textMessage.trim()!==''){sendMessage(textMessage);}};//////////////////\n// Filtrer seulement les messages des ami\nconst messages=getFilteredAndSortedMessages(idAmi);const All_message=messages.map(message=>{if(senderData.idPersonne===message.senderMessage.idPersonne){return/*#__PURE__*/ (// La personne Connecter\n_jsx(Box_Message_Sender,{user_image:\"Image_Terrain/user.jpeg\",user_texte:message.texteMessage},message.idMessage));}else{return/*#__PURE__*/ (// La personne Non connecter\n_jsx(Box_Message_Receiver,{user_image:\"Image_Terrain/profil.jpeg\",user_texte:message.texteMessage},message.idMessage));}});// Fonction du section recherche\nconst handleSearch=()=>{// Ne rien faire\n};const topRef=useRef(null);useEffect(()=>{if(topRef.current){topRef.current.scrollTop=topRef.current.scrollHeight;}},[]);return/*#__PURE__*/_jsxs(\"div\",{id:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"section_recherche\",children:[/*#__PURE__*/_jsx(\"img\",{class:\"section_recherche_background\",src:\"./Image_Terrain/forest_2.gif\",alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"top\",children:/*#__PURE__*/_jsx(Head_Link,{titre:\"Plus d'information sur la plantation\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom\",children:/*#__PURE__*/_jsx(\"div\",{className:\"titre\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Discutez avec vos amis pour plus de productivit\\xE9\"})})})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"section_liste\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top\",ref:topRef,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mini_titre\",children:/*#__PURE__*/_jsx(\"h3\",{children:nomAmi})}),/*#__PURE__*/_jsx(\"div\",{className:\"all_liste_ma_discussion\",children:All_message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom\",children:/*#__PURE__*/_jsx(Section_Recherche,{icon_boutton:icon_send,placeholder:\"Votre message...\",onSubmitAction:handleSubmitMessage,style:{borderRadius:'18px',height:'87%'}})})]})]})]});}export default Ma_discussion;","map":{"version":3,"names":["React","useState","useRef","useEffect","Header","Head_Link","Section_Recherche","user_image","icon_search","icon_send","Data_Message","Data_MyData","Box_Message_Receiver","Box_Message_Sender","jsx","_jsx","jsxs","_jsxs","Ma_discussion","props","keyword","setKeyword","searchParams","URLSearchParams","window","location","search","idAmi","get","nomAmi","prenomAmi","imageAmi","data_message","setData_Message","senderData","getFilteredAndSortedMessages","personneId","filteredMessages","filter","message","senderMessage","idPersonne","receiverMessage","sortedMessages","sort","a","b","Date","dateMessage","sendMessage","textMessage","newMessage","idMessage","concat","length","toISOString","nomPersonne","prenomPersonne","imagePersonne","texteMessage","handleSubmitMessage","trim","messages","All_message","map","user_texte","handleSearch","topRef","current","scrollTop","scrollHeight","id","children","className","class","src","alt","titre","ref","icon_boutton","placeholder","onSubmitAction","style","borderRadius","height"],"sources":["/Users/macbook/Documents/git clones/crop_farm_front_office/src/Pages/Ma_discussion.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport Header from '../Components/Header';\r\nimport Head_Link from '../Components/Head_Link';\r\nimport Section_Recherche from '../Components/Section_Recherche';\r\nimport user_image from '../Components/img_component/user.png';\r\nimport icon_search from '../Components/img_component/chercher_white.png';\r\nimport icon_send from '../Components/img_component/send.png';\r\nimport Data_Message from '../Data/Data_Message';\r\nimport Data_MyData from '../Data/Data_MyData';\r\nimport Box_Message_Receiver from '../Components/Box_Message_Receiver';\r\nimport Box_Message_Sender from '../Components/Box_Message_Sender';\r\nimport '../Css/Section_Droite_Ma_Discussion.css';\r\n\r\nfunction Ma_discussion(props) {\r\n  const [keyword,setKeyword] = useState(null);\r\n  /// Recuperation des donnés du Box message preview ///\r\n  const searchParams = new URLSearchParams(window.location.search);\r\n  const idAmi = searchParams.get('idPersonne');\r\n  const nomAmi = searchParams.get('nomPersonne');\r\n  const prenomAmi = searchParams.get('prenomPersonne');\r\n  const imageAmi = searchParams.get('imageAmi');\r\n  const [data_message, setData_Message] = useState(Data_Message);\r\n  //// Mes donnés d'utilisateurs\r\n  const senderData = Data_MyData[0]; \r\n  // Fonction pour filtrer les messages des amis \r\n\r\n  const getFilteredAndSortedMessages = (personneId) => {\r\n    const filteredMessages = data_message.filter(\r\n      (message) =>\r\n        message.senderMessage.idPersonne === personneId ||\r\n        message.receiverMessage.idPersonne === personneId\r\n    );\r\n\r\n    const sortedMessages = filteredMessages.sort(\r\n      (a, b) => new Date(b.dateMessage) - new Date(a.dateMessage)\r\n    );\r\n\r\n    return sortedMessages;\r\n  };\r\n\r\n  // Fonction pour envoier des messages\r\n  const sendMessage = (textMessage) => {\r\n    \r\n    const newMessage = {\r\n      idMessage: `00${data_message.length + 1}B`,\r\n      dateMessage: new Date().toISOString(),\r\n      senderMessage: senderData,\r\n      receiverMessage: { idPersonne: idAmi, nomPersonne: nomAmi, prenomPersonne: prenomAmi, imagePersonne: imageAmi},\r\n      texteMessage: textMessage,\r\n    };\r\n    ////////////////////////////////////\r\n\r\n\r\n\r\n    // Ajouter dans le tableau message\r\n    setData_Message([...data_message, newMessage]);\r\n  };\r\n\r\n  const handleSubmitMessage = (textMessage) => {\r\n    if (textMessage.trim() !== '') {\r\n      sendMessage(textMessage);\r\n    }\r\n  };\r\n  //////////////////\r\n\r\n  // Filtrer seulement les messages des ami\r\n  const messages = getFilteredAndSortedMessages(idAmi);\r\n\r\n  const All_message = messages.map((message) => {\r\n    if (senderData.idPersonne=== message.senderMessage.idPersonne) {\r\n      return(\r\n        // La personne Connecter\r\n        <Box_Message_Sender\r\n\r\n          key={message.idMessage}\r\n          user_image=\"Image_Terrain/user.jpeg\"\r\n          user_texte={message.texteMessage}\r\n          />\r\n      )\r\n    } else {\r\n      return(\r\n        // La personne Non connecter\r\n        <Box_Message_Receiver\r\n          key={message.idMessage}\r\n          user_image=\"Image_Terrain/profil.jpeg\"\r\n          user_texte={message.texteMessage}\r\n          />\r\n      )\r\n    }\r\n  }\r\n );\r\n\r\n // Fonction du section recherche\r\n const handleSearch = () => {\r\n  // Ne rien faire\r\n};\r\n  const topRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (topRef.current) {\r\n      topRef.current.scrollTop = topRef.current.scrollHeight;\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div id=\"page\">\r\n      <Header />\r\n      <main>\r\n        <section className=\"section_recherche\">\r\n          <img class=\"section_recherche_background\" src=\"./Image_Terrain/forest_2.gif\" alt=\"\" />\r\n          <div className=\"top\">\r\n            <Head_Link titre=\"Plus d'information sur la plantation\" />\r\n          </div>\r\n          <div className=\"bottom\">\r\n            {/* <Section_Recherche titre_recherche=\"Recherche\" placeholder=\"Votre recherche...\" icon_boutton={icon_search} onSubmitAction={handleSearch} /> */}\r\n            <div className=\"titre\">\r\n              <h1>Discutez avec vos amis pour plus de productivité</h1>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"section_liste\">\r\n          <div className='top' ref={topRef}>\r\n            <div className=\"mini_titre\">\r\n              <h3>{nomAmi}</h3>\r\n            </div>\r\n            <div className=\"all_liste_ma_discussion\">\r\n              {All_message}\r\n            </div>\r\n          </div>\r\n\r\n          <div className='bottom'>\r\n            <Section_Recherche icon_boutton={icon_send} placeholder=\"Votre message...\" onSubmitAction={handleSubmitMessage} style={{ borderRadius: '18px', height: '87%' }}/>\r\n          </div>\r\n        </section>\r\n\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Ma_discussion;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}